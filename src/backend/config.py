"""
Конфигурационный файл для backend части проекта.
Содержит все константы, используемые в различных модулях.
"""

# Общие константы для всего проекта
SAMPLE_RATE = 16000  # Частота дискретизации для всех аудиофайлов
EMOTIONS = ['гнев', 'радость', 'грусть']  # Поддерживаемые эмоции

# Константы для обработки аудио
AUDIO_FRAGMENT_LENGTH = 3  # длина фрагмента в секундах

# Константы для предобработки аудио с torchaudio
AUDIO_PROCESSING = {
    'N_FFT': 1024,               # Размер окна для FFT
    'HOP_LENGTH': 512,           # Шаг окна для FFT
    'N_MELS': 128,               # Количество частотных полос Mel
    'N_MFCC': 40,                # Количество MFCC коэффициентов
    'MAX_DURATION': 30,          # Максимальная длительность аудио в секундах
    'FEATURE_TARGET_LENGTH': 200 # Целевая длина временного измерения признаков
}

# Константы для обучения моделей
TRAINING = {
    'BATCH_SIZE': 16,            # Размер батча для обучения
    'VAL_SPLIT': 0.3,            # Доля валидационной выборки
    'EPOCHS': 100,               # Максимальное количество эпох обучения
    'PATIENCE': 20,              # Терпение для раннего останова
    'LEARNING_RATE': 0.001,      # Начальная скорость обучения
    'WEIGHT_DECAY': 1e-5,        # L2 регуляризация
    'MIN_CONFIDENCE': 0.8,       # Минимальная уверенность для распознавания
    'SCHEDULER_FACTOR': 0.5,     # Коэффициент для планировщика скорости обучения
    'SCHEDULER_PATIENCE': 10     # Терпение для планировщика скорости обучения
}

# Константы для FFT и аудио обработки
HOP_LENGTH = 512  # Шаг окна для БПФ

# Константы для обработки аудио
NOISE_PERCENTILE = 10  # Персентиль для определения порога шума

# Константы для модуля augmentation_processor.py
AUGMENTATION_PROCESSOR = {
    # Константы для оптимизации
    # Константы для работы с аудио и аугментации
    'MIN_SNR_DB': 5,       # Минимальное отношение сигнал/шум для добавления шума
    'MAX_SNR_DB': 15,      # Максимальное отношение сигнал/шум для добавления шума
    'MAX_PITCH_SHIFT': 2,  # Максимальное изменение высоты тона (в полутонах)
    'SLOW_SPEEDS': [0.7, 0.8, 0.9],   # Минимальный коэффициент изменения скорости
    'FAST_SPEEDS': [1.5, 1.3, 1.2]      # Максимальный коэффициент изменения скорости
}

# Константы для модуля dataset_creator.py
DATASET_CREATOR = {
    # Константы для вычисления признаков
    'N_MFCC': 40,
    'PREEMPHASIS_COEF': 0.97,
    # Максимальное количество фреймов в выходном признаке
    'MAX_FRAMES': 16,  # ~3 секунды при стандартных настройках
    # Ограничения для обучения
    'N_FFT_DATASET': 2048, # Размер окна для БПФ в dataset_creator
}

